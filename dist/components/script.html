<script>
    document.addEventListener('DOMContentLoaded', function () {
        const wishlistButtonOpen = document.querySelector('#wishlist-open');
        const wishlistBlock = document.querySelector('#wishlist');
        const wishlistCloseBtn = document.querySelector('#wishlist-close');
        const wishlistBg = document.querySelector('#wishlist-bg');
        
        wishlistButtonOpen.addEventListener('click', () => {
          wishlistBlock.classList.add('active');
          wishlistBg.classList.remove('hidden');
          document.body.classList.add('overflow-hidden');
        });

        wishlistCloseBtn.addEventListener('click', () => {
          wishlistBlock.classList.remove('active');
          wishlistBg.classList.add('hidden');
          document.body.classList.remove('overflow-hidden');
        })

        wishlistBg.addEventListener('click', () => {
          wishlistBlock.classList.remove('active');
          wishlistBg.classList.add('hidden');
          document.body.classList.remove('overflow-hidden');
        })
    });


    // JavaScript to toggle the mega menu
    const toggles = document.querySelectorAll('button[data-menu-target]')
    let currentMenu = null
    let currentButton = null

    toggles.forEach(toggle => {
      toggle.addEventListener('click', function (event) {
        event.stopPropagation()
        const targetId = toggle.getAttribute('data-menu-target')
        const targetMenu = document.getElementById(targetId)

        if (currentMenu && currentMenu !== targetMenu) {
          currentMenu.classList.add('hidden')
          currentButton.classList.remove('active')
        }

        if (targetMenu.classList.contains('hidden')) {
          targetMenu.classList.remove('hidden')
          toggle.classList.add('active')
          currentMenu = targetMenu
          currentButton = toggle
        } else {
          targetMenu.classList.add('hidden')
          toggle.classList.remove('active')
          currentMenu = null
          currentButton = null
        }
      })
    })

    // Close the mega menu if clicking outside of it
    document.addEventListener('click', function (event) {
      if (currentMenu && !currentMenu.contains(event.target)) {
        currentMenu.classList.add('hidden')
        if (currentButton) {
          currentButton.classList.remove('active')
        }
        currentMenu = null
        currentButton = null
      }
    })

    // Prevent menu closing when clicking inside the mega menu
    document.querySelectorAll('.mega-menu').forEach(menu => {
      menu.addEventListener('click', function (event) {
        event.stopPropagation()
      })
    })


    // document.addEventListener("DOMContentLoaded", function () {
    //   // Выбираем все формы поиска на странице
    //   const searchForms = document.querySelectorAll('.searchForm');

    //   searchForms.forEach((searchForm) => {
    //     // Определяем элементы внутри текущей формы поиска
    //     const searchInput = searchForm.querySelector('.searchInput');
    //     const searchResultBlock = searchForm.querySelector('.searchResultBlock');
    //     const searchResultText = searchForm.querySelector('.searchResultText');
    //     const searchContainer = searchForm.querySelector('.searchContainer');

    //     // Проверяем, что хотя бы searchInput и searchResultBlock существуют, прежде чем привязывать события
    //     if (searchInput && searchResultBlock && searchResultText) {
    //       // Добавляем обработчик события 'submit' для текущей формы поиска
    //       searchForm.addEventListener('submit', function (event) {
    //         event.preventDefault();

    //         const query = searchInput.value.trim();

    //         if (query && query !== '') {
    //           searchResultBlock.classList.add("show");
    //           searchResultText.innerHTML = `Вы искали: <span class='text-primary font-semibold'>"${query}"</span>`;
    //         } else {
    //           searchResultBlock.classList.remove("show");
    //           searchResultText.innerHTML = '';
    //         }
    //       });

    //       // Добавляем обработчик события 'click' для скрытия результатов поиска, если searchContainer существует
    //       if (searchContainer) {
    //         document.addEventListener('click', function(event) {
    //           if (!searchContainer.contains(event.target)) {
    //             searchResultBlock.classList.remove("show");
    //             searchResultBlock.classList.add('hidden');
    //           }
    //         });
    //       }
    //     } else {
    //       console.warn('Some search components are missing in this form:', searchForm);
    //     }
    //   });
    // });




    document.addEventListener('DOMContentLoaded', function () {
        const burgerButton = document.getElementById('burger-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        burgerButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
            document.body.classList.toggle('overflow-hidden');
        });
    });

    document.querySelectorAll('.menu-btn').forEach(button => {
            button.addEventListener('click', () => {
                const submenu = button.nextElementSibling;

                // Переключаем видимость подменю
                submenu.classList.toggle('hidden');

                // Закрываем другие подменю, если они открыты
                document.querySelectorAll('.submenu').forEach(menu => {
                    if (menu !== submenu) {
                        menu.classList.add('hidden');
                    }
                });
            });
        });

        // Закрываем подменю при клике вне меню
        document.addEventListener('click', (event) => {
            const isClickInsideMenu = event.target.closest('nav');
            if (!isClickInsideMenu) {
                document.querySelectorAll('.submenu').forEach(submenu => {
                    submenu.classList.add('hidden');
                });
            }
        });

    

  </script>

<script type="text/html" src="./js/libs/splide.min.js"></script>
<script type="module" src="./js/scripts.js"></script>